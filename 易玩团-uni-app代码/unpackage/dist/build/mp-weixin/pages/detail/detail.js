(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"09f6":function(t,i,n){},"31aa":function(t,i,n){"use strict";var e=n("09f6"),o=n.n(e);o.a},4092:function(t,i,n){"use strict";n.r(i);var e=n("fadf"),o=n.n(e);for(var a in e)"default"!==a&&function(t){n.d(i,t,(function(){return e[t]}))}(a);i["default"]=o.a},"4aca":function(t,i,n){"use strict";n.d(i,"b",(function(){return o})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){return e}));var e={uAvatar:function(){return n.e("node-modules/uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"d032"))},uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"cdfc"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"f049"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"bfa3"))}},o=function(){var t=this,i=t.$createElement,n=(t._self._c,t._f("timeFrom")(t.$timeFormat(t.pinData.iCreateTime))),e=t.pinData.iStartTime?t.timeFormat(t.pinData.iStartTime.time):null,o=t.pinData.iStartTime?t.timeFormat(t.pinData.iEndTime.time):null,a=t.pinData.issueAttend?t.pinData.issueAttend.slice(0,5):null;t._isMounted||(t.e0=function(i){t.showCommentBar=!1,t.commentFocus=!1},t.e1=function(i){t.textAreaFocus=!0},t.e2=function(i){t.textAreaFocus=!1}),t.$mp.data=Object.assign({},{$root:{f0:n,m0:e,m1:o,l0:a}})},a=[]},"9e43":function(t,i,n){"use strict";(function(t){n("1838");e(n("66fd"));var i=e(n("b234"));function e(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,n("543d")["createPage"])},b234:function(t,i,n){"use strict";n.r(i);var e=n("4aca"),o=n("4092");for(var a in o)"default"!==a&&function(t){n.d(i,t,(function(){return o[t]}))}(a);n("31aa");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],s);i["default"]=u.exports},fadf:function(t,i,n){"use strict";(function(t){function n(t){return s(t)||a(t)||o(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,i){if(t){if("string"===typeof t)return r(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,i):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return r(t)}function r(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u={data:function(){return{theme:"",attendMsg:"",issueId:"",baseUrl:"https://zmetalhearty.com",offsetY:0,sendText:"",pinData:{},isPin:!1,commentFocus:!1,showCommentBar:!1,showAttendForm:!1,textAreaFocus:!1,markerList:[],textAreaStyle:{lineHeight:"50rpx",minHeight:"250rpx"}}},computed:{timeFormat:function(){return function(t){var i=t.split(":");return i[0]+"点"+i[1]+"分"}}},onLoad:function(t){t.id&&(this.issueId=t.id,this.getDetail(t.id),this.addHistory(t.id))},onShow:function(){var i=this;t.onKeyboardHeightChange((function(t){console.log(t),i.offsetY=t.height}))},onUnload:function(){var i=this;t.offKeyboardHeightChange((function(){i.offsetY=0}))},methods:{like:function(){var i,n=this;i=this.pinData.like?"delete":"add",this.request("frontUserIssueLike/".concat(i),"POST",{fuId:t.getStorageSync("userid"),iId:this.pinData.id}).then((function(t){console.log(t),n.showToast(n.pinData.like?"取消点赞成功":"点赞成功","success"),n.pinData.like=!n.pinData.like}))},comment:function(){this.showCommentBar=!0,this.commentFocus=!0},sendComment:function(){var i=this;""!=this.sendText?this.request("issueComment/add","POST",{fuId:t.getStorageSync("userid"),iId:this.pinData.id,icMsg:this.sendText}).then((function(t){console.log(t),i.showToast("评论发送成功","success"),i.getDetail(i.issueId)})):this.showToast("评论内容不能为空","warning")},collect:function(){var i,n=this;i=this.pinData.collection?"delete":"add",this.request("frontUserIssueCollections/".concat(i),"POST",{fuId:t.getStorageSync("userid"),iId:this.pinData.id}).then((function(t){console.log(t),n.showToast(n.pinData.collection?"取消收藏成功":"收藏成功","success"),n.pinData.collection=!n.pinData.collection}))},submitAttend:function(){var i=this;""!=this.attendMsg&&(this.showAttendForm=!1,this.request("issueAttend/add","POST",{fuId:t.getStorageSync("userid"),iId:this.pinData.id}).then((function(t){console.log(t),"succ"==t.data.status&&i.showToast("审核发送成功！","success")})))},addHistory:function(i){i=Number(i);var e=t.getStorageSync("historyList")||[],o=!1;0!=e.length?(n(e).forEach((function(t,n){t==i&&(e.splice(n,1),e.unshift(i),o=!0)})),o||e.unshift(i)):(e.unshift(i),t.setStorageSync("historyList",e))},goChat:function(){t.navigateTo({url:"../profile/profile-other?id="+this.pinData.frontUser.fuId})},routePlan:function(){requirePlugin("routePlan");var i="5SKBZ-TBSW3-QTW33-YJLYA-LKI2Z-IPFMF",n="缘拼",e=1;if(2==this.pinData.iType){var o=JSON.stringify({name:this.pinData.iPositionStart.name.name,latitude:this.pinData.iPositionStart.location.latitude,longitude:this.pinData.iPositionStart.location.longitude}),a=JSON.stringify({name:this.pinData.iPositionEnd.name.name,latitude:this.pinData.iPositionEnd.location.latitude,longitude:this.pinData.iPositionEnd.location.longitude});t.navigateTo({url:"plugin://routePlan/index?key="+i+"&referer="+n+"&endPoint="+a+"&startPoint="+o+"&navigation="+e})}else{var s=JSON.stringify({name:this.pinData.iPositionStart.name.name,latitude:this.pinData.iPositionStart.location.latitude,longitude:this.pinData.iPositionStart.location.longitude});t.navigateTo({url:"plugin://routePlan/index?key="+i+"&referer="+n+"&endPoint="+s+"&navigation="+e})}},goPin:function(){this.pinData.frontUser.fuId!=t.getStorageSync("userid")?this.isPin?this.showToast("您已缘拼成功","warning"):this.showAttendForm=!0:this.showToast("不可以和自己拼团哦","warning")},showToast:function(t,i){this.$refs.uToast.show({title:t,type:i})},handleFocus:function(){var i=this;if(this.pinData.frontUser.fuId!=t.getStorageSync("userid")){var n=this.pinData.follow?"delete":"add";this.request("frontUserFollow/"+n,"POST",{fuId:t.getStorageSync("userid"),fufFuId:this.pinData.frontUser.fuId}).then((function(t){console.log(t),i.pinData.follow=!i.pinData.follow}))}else this.showToast("不可以关注自己哦","warning")},issueFormat:function(i){var n=this;return i.iImg&&(i.iImg=i.iImg.split(","),i.iImg.splice(1,1)),i.iStartTime&&(i.iStartTime={date:i.iStartTime.trim().split(/\s+/)[0],time:i.iStartTime.trim().split(/\s+/)[1]}),i.iEndTime&&(i.iEndTime={date:i.iEndTime.trim().split(/\s+/)[0],time:i.iEndTime.trim().split(/\s+/)[1]}),i.iAddress&&(i.iAddress=JSON.parse(i.iAddress)),i.iPositionStart&&(i.iPositionStart=JSON.parse(i.iPositionStart),this.markerList.push({id:1,iconPath:"/static/icon/discovery-icon/self-location.png",width:45,height:45,latitude:i.iPositionStart.location.latitude,longitude:i.iPositionStart.location.longitude})),i.iPositionEnd&&(i.iPositionEnd=JSON.parse(i.iPositionEnd),this.markerList.push({id:1,iconPath:"/static/icon/discovery-icon/self-location.png",width:45,height:45,latitude:i.iPositionEnd.location.latitude,longitude:i.iPositionEnd.location.longitude})),i.issueAttend.length>0&&i.issueAttend.forEach((function(i){i.fuId==t.getStorageSync("userid")&&(n.isPin=!0)})),i},getDetail:function(i){var n=this;this.request("issue/getDetails","POST",{iId:i,fromFuId:t.getStorageSync("userid")}).then((function(t){n.pinData=n.issueFormat(t.data.data),console.log(n.pinData)}))},goBack:function(){t.navigateBack({delta:1})}}};i.default=u}).call(this,n("543d")["default"])}},[["9e43","common/runtime","common/vendor"]]]);