(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chat-single"],{1394:function(t,n,e){"use strict";var s=e("a24c"),o=e.n(s);o.a},5968:function(t,n,e){},7877:function(t,n,e){"use strict";(function(t){e("1838");s(e("66fd"));var n=s(e("84ff"));function s(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"84ff":function(t,n,e){"use strict";e.r(n);var s=e("e5b7"),o=e("d67d");for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);e("1394"),e("bb72");var u,c=e("f0c5"),r=Object(c["a"])(o["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],u);n["default"]=r.exports},a24c:function(t,n,e){},bb72:function(t,n,e){"use strict";var s=e("5968"),o=e.n(s);o.a},d67d:function(t,n,e){"use strict";e.r(n);var s=e("e1a9"),o=e.n(s);for(var i in s)"default"!==i&&function(t){e.d(n,t,(function(){return s[t]}))}(i);n["default"]=o.a},e1a9:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={data:function(){return{baseUrl:"https://zmetalhearty.com",offsetY:0,userId:1,scrollData:9999,sendText:"",user:{},isAni:!1,myId:t.getStorageSync("userid"),me:t.getStorageSync("userInfo"),chatList:[],scrollId:""}},methods:{getHistory:function(){var t=this;this.yx.getHistoryMsgs({scene:"p2p",asc:!0,to:this.user.fuId,done:function(n,e){console.log(e),t.chatList=e.msgs}})},navigateBack:function(){t.navigateBack({delta:1})},send:function(){var t=this;this.yx.sendText({scene:"p2p",to:this.user.fuId,text:this.sendText,done:function(n,e){console.log(n),console.log(e),t.sendText="",t.chatList.push(e),t.scrollId="scroll-"+e.time,console.log(t.scrollId),t.isAni=!0}})},getUserInfo:function(n){var e=this;this.request("frontUser/getUserInfo","POST",{fuId:n,nFuId:t.getStorageSync("userid")}).then((function(t){console.log(t),e.user=t.data,e.getHistory()}))},pushMsg:function(t){t.from==this.user.fuId&&(this.chatList.push(t),this.scrollId="scroll-"+t.time,console.log(this.scrollId),this.isAni=!0)}},onLoad:function(t){console.log(t),t.id&&this.getUserInfo(t.id),getApp().watch(this.pushMsg,"currentMsg")},onShow:function(){var n=this;t.onKeyboardHeightChange((function(t){console.log(t),n.offsetY=t.height}))},onUnload:function(){var n=this;this.chatList.length>0&&(console.log(this.chatList[0].sessionId),this.yx.resetSessionUnread(this.chatList[0].sessionId)),t.offKeyboardHeightChange((function(){n.offsetY=0}))}};n.default=e}).call(this,e("543d")["default"])},e5b7:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return s}));var s={uInput:function(){return Promise.all([e.e("common/vendor"),e.e("node-modules/uview-ui/components/u-input/u-input")]).then(e.bind(null,"f049"))}},o=function(){var t=this,n=t.$createElement;t._self._c},i=[]}},[["7877","common/runtime","common/vendor"]]]);